{
  "id": 57737,
  "created": "2021-02-02T11:59:50Z",
  "updated": "2021-02-26T14:35:32Z",
  "project_id": 5040,
  "file_type": "test_script",
  "content": "public void test() {\n        int particId = globalConfig.getParticipant().getId();\n        String identity = String.format(\"Participant%d\", particId);\n        int callDuration = 60; // in seconds\n        String appUrl = \"https://voice-webapp-3026-dev.twil.io/index.html?identity=\";\n        int elTimeout = 10;\n        \n        if (particId % 2 == 0) {\n            String caller = String.format(\"%s%s\", appUrl, identity);\n            String toCall = String.format(\"Participant%d\", particId+1);\n            UIElement element = E(byId(\"button-hangup\"));\n            \n            open(caller)\n                    .setElement(byCssSelector(\"body\")).waitFor(elTimeout).untilIsVisible()\n                    .setElement(byId(\"call-controls\")).waitFor(elTimeout).untilIsVisible()\n                    .setElement(byId(\"phone-number\")).waitFor(elTimeout).untilIsVisible().then().sendKeys(toCall)\n                    .setElement(byId(\"button-call\")).waitFor(elTimeout).untilIsVisible().then().click()\n                    .setElement(byId(\"log\")).waitFor(elTimeout).untilHasText(\"Successfully established call!\");\n            sleep(callDuration * 1000);\n            element.waitFor(callDuration * 1000).untilIsVisible().then().click();\n            \n        } else {\n            String callee = String.format(\"%s%s\", appUrl, identity);\n            open(callee)\n                    .setElement(byCssSelector(\"body\")).waitFor(elTimeout).untilIsVisible()\n                    .setElement(byId(\"call-controls\")).waitFor(elTimeout).untilIsVisible()\n                    .setElement(byId(\"log\")).waitFor(elTimeout).untilHasText(\"Ready\")\n                    .setElement(byId(\"log\")).waitFor(callDuration*1000).untilHasText(\"Call ended\");\n        }\n    }\n",
  "name": "script.java"
}